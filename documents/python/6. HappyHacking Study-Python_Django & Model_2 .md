# 20190604 - HH Study - 장고 추가 설명 및 모델



## Namespace 설정

1. #### 현상

   하나의 프로젝트에 두 개의 이상의 app 을 생성 후 실행하면 어떻게 될까? (단, 각 app 의 templates에 동일한 index.html 이 존재한다고 가정하자.)

   

   

   

두번째 app 생성 후 실행

첫번째 앱 url 접속하면???

장고는 templates 를 하나로 묶는다. 그런데 index.html 이 두개다???!

장고는 실행 순서를 정한다. 뭐를 기준으로?! settings.py 에 installed_apps 순서대로!



이를 방지하기 위해 폴더에 namespace 를 정한다.

templates 폴더에 app name으로 폴더를 생성한다.



static 파일도 동일하다.



view.py 에 있는 url 주소를 바꿔줘야 한다.



base.hml 을 index / templates 로 이동



default 는 장고는 app의 templates만 인식가능

BASE_DIR : 장고전체를 가지고 있는 최상위 폴더

` 'DIRS': [os.path.join(BASE_DIR, 'intro', 'templates')], `

- ` 'APP_DIRS': True, ` : app_name / templates 인식 가능케함



gitbash 에서 code ~/.bash_profile

환경변수는 export 다음에 공백이 없어야 한다.

bash 를 바꾼 후에는 항상 refresh 를 해야한다. [source]



<https://www.getpostman.com/downloads/>



## Full Managing

1. models.py 작성
2. makemigrations : 설계도 작성
3. migrate : DB 생성



DB - ORM

DB에 넣기 위한 모델을 만든다. SQL 문을 우리가 직접 건들지 않는다.

```
# id = models.AutoField(primary_key=True)
```

는 테이블 생성시 자동으로 생성된다.



CharField : String 의 길이 제한

TextField : 따로 길이 제한이 없음

시간 설정 : user_tz 는 model 에서도 사용자가 지정한 time_zone 을 적용시키기 위해 False로 설정한다.



테이블 생성 후 장고에 알려주어야 한다. 그럼 initial.py 가 생성된다.

` python manage.py makemigrations `

model 을 수정할 때마다 코드를 실행한다?



` python manage.py sqlmigrate boards 0002 ` 

SQL 문으로 번역된 것을 확인할 수 있다.



`python manage.py migrate` SQL에 넣기!

첫 마이그레이션은 무조건 위와 같이 한다. 



sqllite 다운로드

;C:\sqlite 계정의 환경변수에서 설정

그리고 git.bash 에서 아래 코드 실행

` winpty sqlite3`

.exit

이후 파이참 껐다가 다시 실행한다. 이후 sqlite3 하면 똑같이 실행되어야 한다.



sqlite3 db.sqlite3

.tables

.schema boards_board
